# ğŸ½ï¸ AI PFC Manager

é£Ÿäº‹å†…å®¹ã‚’ãƒ†ã‚­ã‚¹ãƒˆã§å…¥åŠ›ã™ã‚‹ã ã‘ã§ã€AIãŒè‡ªå‹•ã§PFCï¼ˆã‚¿ãƒ³ãƒ‘ã‚¯è³ªãƒ»è„‚è³ªãƒ»ç‚­æ°´åŒ–ç‰©ï¼‰ã¨ã‚«ãƒ­ãƒªãƒ¼ã‚’è§£æãƒ»è¨˜éŒ²ã—ã¦ãã‚Œã‚‹Webã‚¢ãƒ—ãƒªã§ã™ã€‚


## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ |
|---------|------|
| ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ / ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | [Streamlit](https://streamlit.io/) |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ / èªè¨¼ | [Supabase](https://supabase.com/)ï¼ˆãƒ•ãƒªãƒ¼ãƒ—ãƒ©ãƒ³ï¼‰ |
| AIè§£æ | [Google Gemini API](https://ai.google.dev/) |
| ã‚°ãƒ©ãƒ•æç”» | Plotly |


## æ©Ÿèƒ½

- **AIé£Ÿäº‹è§£æ** â€” ãƒ†ã‚­ã‚¹ãƒˆã§é£Ÿäº‹å†…å®¹ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€Gemini APIãŒã‚«ãƒ­ãƒªãƒ¼ãƒ»PFCã‚’è‡ªå‹•æ¨å®š
- **AIã‚¢ãƒ‰ãƒã‚¤ã‚¹** â€” ç›®æ¨™ã¨ã®å·®åˆ†ã‚„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¥½ã¿ã«åŸºã¥ã„ãŸé£Ÿäº‹ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’ç”Ÿæˆ
- **ğŸ“Š PFCãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰** â€” æ—¥æ¬¡ã®ã‚«ãƒ­ãƒªãƒ¼ãƒ»PFCæ¨ç§»ã‚’ã‚°ãƒ©ãƒ•ã§å¯è¦–åŒ–ï¼ˆ7/14/30æ—¥é–“åˆ‡ã‚Šæ›¿ãˆå¯¾å¿œï¼‰
- **ç›®æ¨™ç®¡ç†** â€” ã‚«ãƒ­ãƒªãƒ¼ãƒ»Pãƒ»Fãƒ»Cã®ç›®æ¨™å€¤ã‚’è¨­å®šã—ã€é”æˆç‡ã‚’ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°
- **LINE / ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰å…±æœ‰** â€” 1æ—¥ã®é£Ÿäº‹è¨˜éŒ²ã‚’ãƒ¯ãƒ³ã‚¿ãƒƒãƒ—ã§å…±æœ‰


## ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
pfc-app/
â”œâ”€â”€ app.py              # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ + ãƒ¡ã‚¤ãƒ³UI
â”œâ”€â”€ auth.py             # ãƒ­ã‚°ã‚¤ãƒ³ãƒ»æ–°è¦ç™»éŒ²ç”»é¢
â”œâ”€â”€ config.py           # Supabaseãƒ»Gemini APIã®åˆæœŸåŒ–
â”œâ”€â”€ services.py         # DBæ“ä½œï¼ˆprofile / meal_logsï¼‰+ Geminiè§£æ
â”œâ”€â”€ charts.py           # é”æˆç‡ã‚°ãƒ©ãƒ•ã®æç”»
â”œâ”€â”€ bg.png              # èƒŒæ™¯ç”»åƒ
â”œâ”€â”€ requirements.txt    # Pythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§
â””â”€â”€ pages/
    â””â”€â”€ dashboard.py    # ğŸ“Š PFCãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆæ—¥æ¬¡æ¨ç§»ã‚°ãƒ©ãƒ•ï¼‰
```


## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pip install -r requirements.txt
```

### 2. Streamlit Secrets ã®è¨­å®š

`.streamlit/secrets.toml` ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã‚’è¨˜å…¥ã—ã¦ãã ã•ã„ã€‚

```toml
[supabase]
url = "https://xxxxx.supabase.co"
key = "your-anon-key"

[gemini]
api_key = "your-gemini-api-key"
```

### 3. ã‚¢ãƒ—ãƒªã®èµ·å‹•

```bash
streamlit run app.py
```

ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‹ã‚‰ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã¨ã€ŒğŸ“Š PFCãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã€ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã¾ã™ã€‚


## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹æˆï¼ˆSupabaseï¼‰

### meal_logs

| ã‚«ãƒ©ãƒ  | å‹ | èª¬æ˜ |
|-------|----|------|
| id | uuid | ä¸»ã‚­ãƒ¼ |
| user_id | uuid | auth.users.id ã¸ã®å¤–éƒ¨ã‚­ãƒ¼ |
| meal_date | date | é£Ÿäº‹æ—¥ |
| meal_type | text | æœé£Ÿ / æ˜¼é£Ÿ / å¤•é£Ÿ / é–“é£Ÿ |
| food_name | text | é£Ÿäº‹å†…å®¹ãƒ†ã‚­ã‚¹ãƒˆ |
| calories | int4 | ã‚«ãƒ­ãƒªãƒ¼ (kcal) |
| p_val | int4 | ã‚¿ãƒ³ãƒ‘ã‚¯è³ª (g) |
| f_val | int4 | è„‚è³ª (g) |
| c_val | int4 | ç‚­æ°´åŒ–ç‰© (g) |
| created_at | timestamptz | ä½œæˆæ—¥æ™‚ |

### profiles

| ã‚«ãƒ©ãƒ  | å‹ | èª¬æ˜ |
|-------|----|------|
| id | uuid | ä¸»ã‚­ãƒ¼ï¼ˆauth.users.idï¼‰ |
| declaration | text | ç›®æ¨™å®£è¨€ |
| target_calories | int4 | ç›®æ¨™ã‚«ãƒ­ãƒªãƒ¼ |
| target_p | int4 | ç›®æ¨™ã‚¿ãƒ³ãƒ‘ã‚¯è³ª (g) |
| target_f | int4 | ç›®æ¨™è„‚è³ª (g) |
| target_c | int4 | ç›®æ¨™ç‚­æ°´åŒ–ç‰© (g) |
| likes | text | å¥½ããªé£Ÿã¹ç‰© |
| dislikes | text | è‹¦æ‰‹ãªé£Ÿã¹ç‰© |
| preferences | text | ãã®ä»–è¦æœ› |
| updated_at | timestamptz | æ›´æ–°æ—¥æ™‚ |
